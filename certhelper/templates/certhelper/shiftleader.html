{% extends 'certhelper/base.html' %}

{% block style %}
    {% load static %}
    <link rel="stylesheet" href="{% static "certhelper/components/shiftleader.css" %}" type="text/css">
{% endblock style %}
{% block content %}
    {% load render_table from django_tables2 %}
    {% load bootstrap3 %}

    <div class="container-fluid">
        <h1 align="center">Shift Leader View</h1>

        {% include "certhelper/components/menu.html" %}

        <div class="container">
            {% if filter %}
                {% include "certhelper/components/filter.html" %}
            {% else %}
                <div class="alert alert-danger" role="alert">No Filter found.</div>
            {% endif %}
        </div>
        <ul class="nav nav-tabs">
            <li><a data-toggle="tab" href="#runtable">Certified Runs</a></li>
            <li><a data-toggle="tab" href="#deleted-runs">Deleted Certifications</a></li>
            <li><a data-toggle="tab" href="#summary">Summary</a></li>
            <li class="active"><a data-toggle="tab" href="#shiftleader-report">Shift Leader Report</a></li>
        </ul>
        <div class="tab-content">
            <div id="runtable" class="tab-pane fade">
                <h3>List of Certified Runs</h3>
                {% if table %}
                    {% render_table table 'django_tables2/bootstrap.html' %}
                {% else %}
                    <div class="alert alert-danger" role="alert">No Table found.</div>
                {% endif %}
            </div>

            <div id="deleted-runs" class="tab-pane fade">
                <h3>List of deleted certified runs</h3>
                {% if deleted_runs %}
                    {% render_table deleted_runs 'django_tables2/bootstrap.html' %}
                {% else %}
                    <div class="alert alert-danger" role="alert">No Table found.</div>
                {% endif %}
            </div>


            <div id="summary" class="tab-pane fade">
                <h3>Summary</h3>
                {% if summary %}
                    {% include "certhelper/components/summary.html" %}
                {% else %}
                    <div class="alert alert-danger" role="alert">No Summary found.</div>
                {% endif %}
            </div>

            <div id="shiftleader-report" class="tab-pane fade in active">
                <h3>Shift Leader Report</h3>
                {% if slreport %}
                    {% include "certhelper/components/shift-leader-report.html" %}
                {% else %}
                    <div class="alert alert-danger" role="alert">No Shiftleader Report found.</div>
                {% endif %}
            </div>


        </div>
    </div>
    </div>
{% endblock content %}


{% block script %}
    {% load static %}
    <script src="{% static "certhelper/components/shiftleader.js" %}"></script>
    <script src="{% static "certhelper/components/restore_selected_tabs.js" %}"></script>
    <script src="{% static "certhelper/components/filter.js" %}"></script>
    <script>
        $(document).ready(function () {
            $("#sl-filter-form").submit(function () {
                var form = $(this);
                disable_empty_filter_fields(form); // simpliflies URL alot by removing unused fields
                simplify_date_filter_parameters(form); // shortens date GET parameters in URL
                return true; // ensure form still submits
            });
        });
    </script>
{% endblock script %}